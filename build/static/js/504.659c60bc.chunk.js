"use strict";(self.webpackChunkagnoworksphere=self.webpackChunkagnoworksphere||[]).push([[504],{504:(e,a,t)=>{t.r(a),t.d(a,{default:()=>u});var s=t(43),r=t(216),n=t(985),i=t(266),o=t(16),l=t(378),c=t(557),d=t(984),m=t(579);const u=()=>{const e=(0,r.zy)(),[a,u]=(0,s.useState)(!0),[h,g]=(0,s.useState)(null),[p,v]=(0,s.useState)({name:"",description:"",visibility:"private",status:"active",priority:"medium",startDate:"",endDate:"",budget:"",currency:"USD",timezone:"America/New_York"}),[x,b]=(0,s.useState)({emailUpdates:!0,taskAssignments:!0,deadlineReminders:!0,statusChanges:!1,weeklyReports:!0,slackIntegration:!1,teamsIntegration:!0});(0,s.useEffect)(()=>{(async()=>{try{var a,t,s;u(!0);const n=(null===(a=e.state)||void 0===a?void 0:a.projectId)||(null===(t=e.state)||void 0===t||null===(s=t.project)||void 0===s?void 0:s.id);if(!n)return console.log("No project ID found, using default values"),void u(!1);console.log("Loading project data for:",n);const i=await d.default.projects.getById(n);var r;if(i)g(i),v({name:i.name||"",description:i.description||"",visibility:i.visibility||"private",status:i.status||"active",priority:i.priority||"medium",startDate:i.start_date?i.start_date.split("T")[0]:"",endDate:i.due_date?i.due_date.split("T")[0]:"",budget:(null===(r=i.budget)||void 0===r?void 0:r.toString())||"",currency:i.currency||"USD",timezone:i.timezone||"America/New_York"}),console.log("\u2705 Project data loaded:",i)}catch(n){console.error("Failed to load project data:",n)}finally{u(!1)}})()},[e.state]);const[j,f]=(0,s.useState)({autoAssignTasks:!1,requireApproval:!0,allowGuestAccess:!1,enableTimeTracking:!0,mandatoryComments:!1}),[y,w]=(0,s.useState)(!1),N=[{value:"viewer",label:"Viewer - Can view project"},{value:"member",label:"Member - Can edit tasks"},{value:"admin",label:"Admin - Can manage project"},{value:"owner",label:"Owner - Full control"}],k=(e,a)=>{v(t=>({...t,[e]:a}))},A=(e,a)=>{b(t=>({...t,[e]:a}))},C=(e,a)=>{f(t=>({...t,[e]:a}))},S=e=>{const a=new Date(e),t=(new Date-a)/36e5;return t<1?"Active now":t<24?`${Math.floor(t)}h ago`:a.toLocaleDateString()},T=e=>{switch(e){case"owner":return"text-error bg-error/10";case"admin":return"text-warning bg-warning/10";case"member":return"text-primary bg-primary/10";default:return"text-text-secondary bg-muted"}};return a?(0,m.jsx)("div",{className:"space-y-8",children:(0,m.jsx)("div",{className:"bg-card rounded-lg border border-border p-6",children:(0,m.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 py-8",children:[(0,m.jsx)(n.A,{name:"Loader2",size:32,className:"animate-spin text-primary"}),(0,m.jsx)("div",{className:"text-lg text-muted-foreground",children:"Loading project settings..."})]})})}):(0,m.jsxs)("div",{className:"space-y-8",children:[(0,m.jsxs)("div",{className:"bg-card rounded-lg border border-border p-6",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,m.jsx)("h3",{className:"text-lg font-medium text-foreground",children:"Project Information"}),(0,m.jsx)(i.A,{variant:"outline",size:"sm",iconName:"Save",iconPosition:"left",onClick:async()=>{try{if(w(!0),null===h||void 0===h||!h.id)return void alert("No project selected to save");console.log("Saving project settings:",p);const e={name:p.name,description:p.description,status:p.status,priority:p.priority,start_date:p.startDate||null,due_date:p.endDate||null},a=await d.default.projects.update(h.id,e);if(!a)throw new Error("Failed to update project");console.log("\u2705 Project updated successfully"),alert("Project settings saved successfully!"),g(a)}catch(e){console.error("Failed to save project:",e),alert(`Failed to save project: ${e.message}`)}finally{w(!1)}},disabled:y,children:y?"Saving...":"Save Changes"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsx)(o.A,{label:"Project Name",type:"text",value:p.name,onChange:e=>k("name",e.target.value),required:!0}),(0,m.jsx)(l.A,{label:"Project Status",options:[{value:"active",label:"Active"},{value:"on-hold",label:"On Hold"},{value:"completed",label:"Completed"},{value:"archived",label:"Archived"}],value:p.status,onChange:e=>k("status",e)}),(0,m.jsx)("div",{className:"md:col-span-2",children:(0,m.jsx)(o.A,{label:"Description",type:"text",value:p.description,onChange:e=>k("description",e.target.value),description:"Brief description of the project goals and objectives"})}),(0,m.jsx)(l.A,{label:"Visibility",options:[{value:"private",label:"Private - Only team members"},{value:"organization",label:"Organization - All org members"},{value:"public",label:"Public - Anyone with link"}],value:p.visibility,onChange:e=>k("visibility",e)}),(0,m.jsx)(l.A,{label:"Priority",options:[{value:"low",label:"Low Priority"},{value:"medium",label:"Medium Priority"},{value:"high",label:"High Priority"},{value:"critical",label:"Critical Priority"}],value:p.priority,onChange:e=>k("priority",e)}),(0,m.jsx)(o.A,{label:"Start Date",type:"date",value:p.startDate,onChange:e=>k("startDate",e.target.value)}),(0,m.jsx)(o.A,{label:"End Date",type:"date",value:p.endDate,onChange:e=>k("endDate",e.target.value)}),(0,m.jsx)(o.A,{label:"Budget",type:"number",value:p.budget,onChange:e=>k("budget",e.target.value)}),(0,m.jsx)(l.A,{label:"Currency",options:[{value:"USD",label:"US Dollar (USD)"},{value:"EUR",label:"Euro (EUR)"},{value:"GBP",label:"British Pound (GBP)"},{value:"JPY",label:"Japanese Yen (JPY)"}],value:p.currency,onChange:e=>k("currency",e)}),(0,m.jsx)("div",{className:"md:col-span-2",children:(0,m.jsx)(l.A,{label:"Timezone",options:[{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"Europe/London",label:"Greenwich Mean Time (GMT)"},{value:"Europe/Paris",label:"Central European Time (CET)"},{value:"Asia/Tokyo",label:"Japan Standard Time (JST)"}],value:p.timezone,onChange:e=>k("timezone",e),searchable:!0})})]})]}),(0,m.jsxs)("div",{className:"bg-card rounded-lg border border-border p-6",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,m.jsx)("h3",{className:"text-lg font-medium text-foreground",children:"Team Members"}),(0,m.jsx)(i.A,{variant:"default",size:"sm",iconName:"UserPlus",iconPosition:"left",children:"Invite Member"})]}),(0,m.jsx)("div",{className:"space-y-4",children:[{id:1,name:"Sarah Johnson",email:"sarah.johnson@company.com",role:"owner",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face",joinedDate:"2025-01-15",lastActive:"2025-07-28T06:45:00Z"},{id:2,name:"Michael Chen",email:"michael.chen@company.com",role:"admin",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face",joinedDate:"2025-01-20",lastActive:"2025-07-28T07:00:00Z"},{id:3,name:"Emily Rodriguez",email:"emily.rodriguez@company.com",role:"member",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face",joinedDate:"2025-02-01",lastActive:"2025-07-28T06:30:00Z"},{id:4,name:"David Kim",email:"david.kim@company.com",role:"member",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",joinedDate:"2025-02-10",lastActive:"2025-07-27T18:20:00Z"}].map(e=>(0,m.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border hover:bg-muted/50 transition-colors",children:[(0,m.jsxs)("div",{className:"flex items-center gap-4",children:[(0,m.jsx)("img",{src:e.avatar,alt:e.name,className:"w-12 h-12 rounded-full object-cover"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{className:"font-medium text-foreground",children:e.name}),(0,m.jsx)("p",{className:"text-sm text-text-secondary",children:e.email}),(0,m.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,m.jsxs)("span",{className:"text-xs text-text-secondary",children:["Joined ",new Date(e.joinedDate).toLocaleDateString()]}),(0,m.jsx)("span",{className:"text-xs text-text-secondary",children:"\u2022"}),(0,m.jsx)("span",{className:"text-xs text-text-secondary",children:S(e.lastActive)})]})]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T(e.role)}`,children:e.role}),(0,m.jsx)(l.A,{options:N,value:e.role,onChange:a=>{return t=e.id,s=a,void console.log(`Changing role for member ${t} to ${s}`);var t,s},className:"w-40"}),(0,m.jsx)(i.A,{variant:"ghost",size:"sm",iconName:"Trash2",onClick:()=>{return a=e.id,void console.log(`Removing member: ${a}`);var a},disabled:"owner"===e.role})]})]},e.id))})]}),(0,m.jsxs)("div",{className:"bg-card rounded-lg border border-border p-6",children:[(0,m.jsx)("h3",{className:"text-lg font-medium text-foreground mb-6",children:"Notification Settings"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsx)("h4",{className:"font-medium text-foreground",children:"Email Notifications"}),(0,m.jsx)(c.S,{label:"Task assignments and updates",checked:x.taskAssignments,onChange:e=>A("taskAssignments",e.target.checked)}),(0,m.jsx)(c.S,{label:"Deadline reminders",checked:x.deadlineReminders,onChange:e=>A("deadlineReminders",e.target.checked)}),(0,m.jsx)(c.S,{label:"Status changes",checked:x.statusChanges,onChange:e=>A("statusChanges",e.target.checked)}),(0,m.jsx)(c.S,{label:"Weekly progress reports",checked:x.weeklyReports,onChange:e=>A("weeklyReports",e.target.checked)})]}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsx)("h4",{className:"font-medium text-foreground",children:"Integration Notifications"}),(0,m.jsx)(c.S,{label:"Slack notifications",checked:x.slackIntegration,onChange:e=>A("slackIntegration",e.target.checked)}),(0,m.jsx)(c.S,{label:"Microsoft Teams notifications",checked:x.teamsIntegration,onChange:e=>A("teamsIntegration",e.target.checked)})]})]})]}),(0,m.jsxs)("div",{className:"bg-card rounded-lg border border-border p-6",children:[(0,m.jsx)("h3",{className:"text-lg font-medium text-foreground mb-6",children:"Workflow Settings"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsx)(c.S,{label:"Auto-assign tasks to available members",description:"Automatically distribute new tasks based on workload",checked:j.autoAssignTasks,onChange:e=>C("autoAssignTasks",e.target.checked)}),(0,m.jsx)(c.S,{label:"Require approval for task completion",description:"Tasks need admin approval before marking as done",checked:j.requireApproval,onChange:e=>C("requireApproval",e.target.checked)}),(0,m.jsx)(c.S,{label:"Enable time tracking",description:"Allow team members to log time spent on tasks",checked:j.enableTimeTracking,onChange:e=>C("enableTimeTracking",e.target.checked)})]}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsx)(c.S,{label:"Allow guest access",description:"External users can view project with limited permissions",checked:j.allowGuestAccess,onChange:e=>C("allowGuestAccess",e.target.checked)}),(0,m.jsx)(c.S,{label:"Mandatory comments on status changes",description:"Require explanation when changing task status",checked:j.mandatoryComments,onChange:e=>C("mandatoryComments",e.target.checked)})]})]})]}),(0,m.jsxs)("div",{className:"bg-card rounded-lg border border-border p-6",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,m.jsx)("h3",{className:"text-lg font-medium text-foreground",children:"Integrations"}),(0,m.jsx)(i.A,{variant:"outline",size:"sm",iconName:"Plus",iconPosition:"left",children:"Add Integration"})]}),(0,m.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{id:"slack",name:"Slack",description:"Send notifications and updates to Slack channels",icon:"MessageSquare",connected:!0,lastSync:"2025-07-28T06:30:00Z"},{id:"teams",name:"Microsoft Teams",description:"Collaborate and share updates in Teams channels",icon:"Users",connected:!1,lastSync:null},{id:"jira",name:"Jira",description:"Sync issues and track development progress",icon:"Bug",connected:!0,lastSync:"2025-07-28T05:45:00Z"},{id:"calendar",name:"Google Calendar",description:"Sync project deadlines and meetings",icon:"Calendar",connected:!1,lastSync:null},{id:"github",name:"GitHub",description:"Link commits and pull requests to tasks",icon:"GitBranch",connected:!0,lastSync:"2025-07-28T07:00:00Z"}].map(e=>(0,m.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border",children:[(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsx)("div",{className:"w-10 h-10 bg-muted rounded-lg flex items-center justify-center",children:(0,m.jsx)(n.A,{name:e.icon,size:20,className:"text-primary"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{className:"font-medium text-foreground",children:e.name}),(0,m.jsx)("p",{className:"text-sm text-text-secondary",children:e.description}),e.connected&&e.lastSync&&(0,m.jsxs)("p",{className:"text-xs text-success",children:["Last sync: ",new Date(e.lastSync).toLocaleString()]})]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(e.connected?"text-success bg-success/10":"text-text-secondary bg-muted"),children:e.connected?"Connected":"Not Connected"}),(0,m.jsx)(i.A,{variant:e.connected?"destructive":"default",size:"sm",onClick:()=>{return a=e.id,void console.log(`Toggling integration: ${a}`);var a},children:e.connected?"Disconnect":"Connect"})]})]},e.id))})]}),(0,m.jsxs)("div",{className:"bg-card rounded-lg border border-error/20 p-6",children:[(0,m.jsx)("h3",{className:"text-lg font-medium text-error mb-4",children:"Danger Zone"}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border border-error/20 bg-error/5",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{className:"font-medium text-foreground",children:"Archive Project"}),(0,m.jsx)("p",{className:"text-sm text-text-secondary",children:"Archive this project to hide it from active projects. You can restore it later."})]}),(0,m.jsx)(i.A,{variant:"outline",size:"sm",onClick:async()=>{if(window.confirm("Are you sure you want to archive this project? You can restore it later."))try{const e=(await Promise.resolve().then(t.bind(t,984))).default;await e.projects.update(h.id,{status:"archived"}),alert("Project archived successfully!"),window.location.href="/role-based-dashboard"}catch(e){console.error("Failed to archive project:",e),alert("Failed to archive project. Please try again.")}},children:"Archive"})]}),(0,m.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border border-error/20 bg-error/5",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{className:"font-medium text-foreground",children:"Delete Project"}),(0,m.jsx)("p",{className:"text-sm text-text-secondary",children:"Permanently delete this project and all its data. This action cannot be undone."})]}),(0,m.jsx)(i.A,{variant:"destructive",size:"sm",onClick:async()=>{const e=(null===h||void 0===h?void 0:h.name)||"this project",a=`Are you sure you want to delete "${e}"? This action cannot be undone and will permanently delete all project data including tasks, files, and history.`;if(!window.confirm(a))return;if(window.prompt(`To confirm deletion, please type the project name: "${e}"`)===e)try{const e=(await Promise.resolve().then(t.bind(t,984))).default;await e.projects.delete(h.id),alert("Project deleted successfully!"),window.location.href="/role-based-dashboard"}catch(s){console.error("Failed to delete project:",s),alert("Failed to delete project. Please try again.")}else alert("Project name does not match. Deletion cancelled.")},children:"Delete Project"})]})]})]})]})}}}]);
//# sourceMappingURL=504.659c60bc.chunk.js.map