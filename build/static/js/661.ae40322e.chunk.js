"use strict";(self.webpackChunkagnoworksphere=self.webpackChunkagnoworksphere||[]).push([[661],{661:(e,s,t)=>{t.r(s),t.d(s,{default:()=>g});var l=t(43),a=t(216),n=t(985),r=t(266),i=t(984),d=t(579);const o=e=>{let{projectId:s,userRole:t,onRequestSignoff:a,onApproveSignoff:n}=e;const[r,o]=(0,l.useState)(null),[c,m]=(0,l.useState)(!0),[u,x]=(0,l.useState)(null);(0,l.useEffect)(()=>{s&&g()},[s]);const g=async()=>{try{m(!0),x(null);const e=await i.default.projectSignoff.getSignoffStatus(s);o(e.data)}catch(u){console.error("Failed to load sign-off status:",u),x(u.message)}finally{m(!1)}};return c?(0,d.jsx)("div",{className:"animate-pulse",children:(0,d.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32"})}):u?(0,d.jsx)("div",{className:"text-sm text-red-600",children:"Failed to load sign-off status"}):r?(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[r?r.sign_off_approved?(0,d.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,d.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Signed Off"]}):r.sign_off_requested?(0,d.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[(0,d.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),"Pending Approval"]}):(0,d.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[(0,d.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})}),"Not Requested"]}):null,null!==r&&void 0!==r&&r.data_protected?(0,d.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[(0,d.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Data Protected"]}):null]}),r.sign_off_requested&&(0,d.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-blue-900",children:"Sign-off Request Details"}),(0,d.jsxs)("div",{className:"mt-2 space-y-1 text-xs text-blue-700",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{className:"font-medium",children:"Requested by:"})," ",r.requester_name||"Unknown"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{className:"font-medium",children:"Requested on:"})," ",new Date(r.sign_off_requested_at).toLocaleDateString()]}),r.protection_reason&&(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{className:"font-medium",children:"Reason:"})," ",r.protection_reason]})]})]}),(0,d.jsx)("div",{className:"flex space-x-2 ml-4",children:r.can_approve&&!r.sign_off_approved&&(0,d.jsx)("button",{onClick:()=>null===n||void 0===n?void 0:n(r),className:"px-3 py-1 text-xs font-medium text-white bg-green-600 rounded hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Review"})})]})}),r.sign_off_approved&&(0,d.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-green-900",children:"Project Signed Off"}),(0,d.jsxs)("div",{className:"mt-2 space-y-1 text-xs text-green-700",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{className:"font-medium",children:"Approved by:"})," ",r.approver_name||"Unknown"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{className:"font-medium",children:"Approved on:"})," ",new Date(r.sign_off_approved_at).toLocaleDateString()]}),r.sign_off_notes&&(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{className:"font-medium",children:"Notes:"})," ",r.sign_off_notes]})]})]}),!r.sign_off_requested&&"viewer"!==t&&(0,d.jsxs)("button",{onClick:()=>null===a||void 0===a?void 0:a(r),className:"inline-flex items-center px-3 py-2 text-sm font-medium text-blue-700 bg-blue-100 border border-blue-300 rounded-md hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,d.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Request Sign-off"]}),r.data_protected&&(0,d.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsx)("div",{className:"flex-shrink-0",children:(0,d.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,d.jsxs)("div",{className:"ml-3",children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Data Protection Active"}),(0,d.jsx)("div",{className:"mt-2 text-sm text-yellow-700",children:(0,d.jsxs)("p",{children:["Project data (cards, boards, columns) is protected from deletion.",r.protection_reason&&(0,d.jsxs)("span",{className:"block mt-1",children:[(0,d.jsx)("strong",{children:"Reason:"})," ",r.protection_reason]})]})})]})]})})]}):null};var c=t(642),m=t(16),u=t(378);const x=e=>{let{isOpen:s,onClose:t,onSave:a,projectId:i}=e;const[o,c]=(0,l.useState)({title:"",description:"",dueDate:"",priority:"medium",status:"pending"}),[x,g]=(0,l.useState)(!1),[p,h]=(0,l.useState)({}),f=(e,s)=>{c(t=>({...t,[e]:s})),p[e]&&h(s=>({...s,[e]:""}))},j=()=>{c({title:"",description:"",dueDate:"",priority:"medium",status:"pending"}),h({}),t()};return s?(0,d.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,d.jsxs)("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,d.jsx)(n.A,{name:"Flag",size:20,className:"text-blue-600"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-slate-900",children:"Add Milestone"}),(0,d.jsx)("p",{className:"text-sm text-slate-600",children:"Create a new project milestone"})]})]}),(0,d.jsx)(r.A,{variant:"ghost",size:"sm",onClick:j,iconName:"X"})]}),(0,d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};if(o.title.trim()||(e.title="Milestone title is required"),o.dueDate){const s=new Date(o.dueDate),t=new Date;t.setHours(0,0,0,0),s<t&&(e.dueDate="Due date cannot be in the past")}else e.dueDate="Due date is required";return h(e),0===Object.keys(e).length})()){g(!0);try{const e={...o,projectId:i,id:Date.now(),progress:0,createdAt:(new Date).toISOString()};a&&await a(e),c({title:"",description:"",dueDate:"",priority:"medium",status:"pending"}),h({}),t()}catch(s){console.error("Error creating milestone:",s),h({submit:"Failed to create milestone. Please try again."})}finally{g(!1)}}},className:"p-6 space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Milestone Title *"}),(0,d.jsx)(m.A,{type:"text",value:o.title,onChange:e=>f("title",e.target.value),placeholder:"Enter milestone title",error:p.title,disabled:x})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description"}),(0,d.jsx)("textarea",{value:o.description,onChange:e=>f("description",e.target.value),placeholder:"Enter milestone description (optional)",rows:3,disabled:x,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Due Date *"}),(0,d.jsx)(m.A,{type:"date",value:o.dueDate,onChange:e=>f("dueDate",e.target.value),error:p.dueDate,disabled:x})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Priority"}),(0,d.jsx)(u.A,{value:o.priority,onChange:e=>f("priority",e),disabled:x,options:[{value:"low",label:"Low Priority"},{value:"medium",label:"Medium Priority"},{value:"high",label:"High Priority"},{value:"critical",label:"Critical"}]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Status"}),(0,d.jsx)(u.A,{value:o.status,onChange:e=>f("status",e),disabled:x,options:[{value:"pending",label:"Pending"},{value:"in-progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}]})]}),p.submit&&(0,d.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(n.A,{name:"AlertCircle",size:16,className:"text-red-600"}),(0,d.jsx)("span",{className:"text-sm text-red-700",children:p.submit})]})}),(0,d.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,d.jsx)(r.A,{type:"button",variant:"outline",onClick:j,disabled:x,className:"flex-1",children:"Cancel"}),(0,d.jsx)(r.A,{type:"submit",variant:"default",disabled:x,className:"flex-1",iconName:x?"Loader2":"Plus",iconPosition:"left",children:x?"Creating...":"Create Milestone"})]})]})]})}):null},g=e=>{let{project:s,userRole:t,onSwitchTab:i}=e;const m=(0,a.Zp)(),[u,g]=(0,l.useState)([]),[p,h]=(0,l.useState)([]),[f,j]=(0,l.useState)(!1),[v,b]=(0,l.useState)("request"),[N,y]=(0,l.useState)(null),[w,S]=(0,l.useState)(!1),D=(0,l.useCallback)(e=>{if(!e||0===e.length)return void h([{id:1,title:"Project Initiation",status:"completed",dueDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],progress:100},{id:2,title:"Planning & Design",status:"completed",dueDate:new Date(Date.now()-1296e6).toISOString().split("T")[0],progress:100},{id:3,title:"Development Phase",status:"in-progress",dueDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],progress:(null===s||void 0===s?void 0:s.progress)||65},{id:4,title:"Testing & QA",status:"pending",dueDate:new Date(Date.now()+5184e6).toISOString().split("T")[0],progress:0},{id:5,title:"Deployment",status:"pending",dueDate:new Date(Date.now()+7776e6).toISOString().split("T")[0],progress:0}]);const t={};e.forEach(e=>{const s=e.title.split(" ")[0];t[s]||(t[s]=[]),t[s].push(e)});const l=Object.entries(t).map((e,s)=>{let[t,l]=e;const a=l.filter(e=>"completed"===e.status).length,n=l.length>0?Math.round(a/l.length*100):0;let r="pending";return 100===n?r="completed":n>0&&(r="in-progress"),{id:s+1,title:`${t} Phase`,status:r,dueDate:new Date(Date.now()+30*(s+1)*24*60*60*1e3).toISOString().split("T")[0],progress:n}});h(l)},[s]),k=(0,l.useCallback)(()=>{if(null!==s&&void 0!==s&&s.tasks)try{const e="string"===typeof s.tasks?JSON.parse(s.tasks):s.tasks;D(e||[])}catch(e){console.error("Error parsing project tasks:",e)}if(null!==s&&void 0!==s&&s.team_members)try{const e="string"===typeof s.team_members?JSON.parse(s.team_members):s.team_members;g(e||[])}catch(e){console.error("Error parsing team members:",e),g([])}else g([])},[s,D]);(0,l.useEffect)(()=>{s&&k()},[s,k]),(0,l.useEffect)(()=>{const e=e=>{const{project:t}=e.detail;t&&t.id===(null===s||void 0===s?void 0:s.id)&&k()};return window.addEventListener("projectUpdated",e),()=>window.removeEventListener("projectUpdated",e)},[s,k]);const _=(0,l.useCallback)(()=>{if(null===s||void 0===s||!s.tasks)return(null===s||void 0===s?void 0:s.progress)||0;try{const e="string"===typeof s.tasks?JSON.parse(s.tasks):s.tasks;if(!e||0===e.length)return(null===s||void 0===s?void 0:s.progress)||0;const t=e.filter(e=>"completed"===e.status).length;return Math.round(t/e.length*100)}catch(e){return console.error("Error calculating project progress:",e),(null===s||void 0===s?void 0:s.progress)||0}},[s]),C={name:(null===s||void 0===s?void 0:s.name)||"Untitled Project",description:(null===s||void 0===s?void 0:s.description)||"No description available",status:(null===s||void 0===s?void 0:s.status)||"Active",progress:_(),startDate:(null===s||void 0===s?void 0:s.start_date)||(null===s||void 0===s?void 0:s.startDate)||(new Date).toISOString().split("T")[0],endDate:(null===s||void 0===s?void 0:s.end_date)||(null===s||void 0===s?void 0:s.endDate)||(new Date).toISOString().split("T")[0],budget:null!==s&&void 0!==s&&s.budget?{allocated:s.budget.allocated||s.budget||0,spent:s.budget.spent||0,remaining:s.budget.remaining||(s.budget.allocated||s.budget||0)-(s.budget.spent||0)}:{allocated:0,spent:0,remaining:0},health:(null===s||void 0===s?void 0:s.health)||"Good",priority:(null===s||void 0===s?void 0:s.priority)||"Medium",created_by:null===s||void 0===s?void 0:s.created_by,created_at:null===s||void 0===s?void 0:s.created_at,team_members:(null===s||void 0===s?void 0:s.team_members)||[],project_manager:null===s||void 0===s?void 0:s.project_manager},A=e=>{switch(e){case"completed":return"text-success bg-success/10";case"in-progress":return"text-warning bg-warning/10";default:return"text-text-secondary bg-muted"}},P=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)("div",{className:"bg-card rounded-lg border border-border p-6",children:(0,d.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,d.jsx)("h2",{className:"text-2xl font-semibold text-foreground",children:C.name}),(0,d.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(e=>{switch(e){case"Good":return"text-success";case"At Risk":return"text-warning";case"Critical":return"text-error";default:return"text-text-secondary"}})(C.health)}`,children:C.health})]}),(0,d.jsx)("p",{className:"text-text-secondary mb-4",children:C.description}),(0,d.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(n.A,{name:"Calendar",size:16,className:"text-text-secondary"}),(0,d.jsxs)("span",{className:"text-text-secondary",children:[new Date(C.startDate).toLocaleDateString()," -"," ",new Date(C.endDate).toLocaleDateString()]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(n.A,{name:"Flag",size:16,className:"text-error"}),(0,d.jsxs)("span",{className:"text-foreground font-medium",children:[C.priority," Priority"]})]})]})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(r.A,{variant:"outline",iconName:"Kanban",iconPosition:"left",onClick:()=>{s&&(console.log("Navigating to kanban board for:",s),localStorage.setItem("currentProjectId",s.id),localStorage.setItem("currentProject",JSON.stringify(s)),m("/kanban-board",{state:{projectId:s.id,project:s}}))},children:"Board"}),(0,d.jsx)(r.A,{variant:"outline",iconName:"Settings",iconPosition:"left",onClick:()=>{console.log("Navigating to project settings..."),i?i("settings"):alert("Settings functionality: This would switch to the Settings tab or open project settings.")},children:"Settings"}),(0,d.jsx)(r.A,{variant:"default",iconName:"Plus",iconPosition:"left",onClick:()=>{console.log("Switching to tasks tab..."),i?i("tasks"):alert("Add Task functionality: This would switch to the Tasks tab.")},children:"Add Task"})]})]})}),(0,d.jsxs)("div",{className:`grid grid-cols-1 md:grid-cols-2 ${"owner"===t?"lg:grid-cols-3":"lg:grid-cols-2"} gap-6`,children:[(0,d.jsxs)("div",{className:"bg-card rounded-lg border border-border p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-foreground",children:"Progress"}),(0,d.jsx)(n.A,{name:"TrendingUp",size:20,className:"text-primary"})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("span",{className:"text-2xl font-bold text-foreground",children:[C.progress,"%"]}),(0,d.jsx)("span",{className:"text-sm text-success",children:"+5% this week"})]}),(0,d.jsx)("div",{className:"w-full bg-muted rounded-full h-2",children:(0,d.jsx)("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${C.progress}%`}})}),(0,d.jsx)("p",{className:"text-sm text-text-secondary",children:"On track for completion"})]})]}),"owner"===t&&(0,d.jsxs)("div",{className:"bg-card rounded-lg border border-border p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-foreground",children:"Budget"}),(0,d.jsx)(n.A,{name:"DollarSign",size:20,className:"text-primary"})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-text-secondary",children:"Allocated"}),(0,d.jsx)("span",{className:"font-medium text-foreground",children:P(C.budget.allocated)})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-text-secondary",children:"Spent"}),(0,d.jsx)("span",{className:"font-medium text-foreground",children:P(C.budget.spent)})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-text-secondary",children:"Remaining"}),(0,d.jsx)("span",{className:"font-medium text-success",children:P(C.budget.remaining)})]}),(0,d.jsx)("div",{className:"w-full bg-muted rounded-full h-2",children:(0,d.jsx)("div",{className:"bg-warning h-2 rounded-full transition-all duration-300",style:{width:C.budget.spent/C.budget.allocated*100+"%"}})})]})]}),(0,d.jsxs)("div",{className:"bg-card rounded-lg border border-border p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-foreground",children:"Team"}),(0,d.jsx)(n.A,{name:"Users",size:20,className:"text-primary"})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-text-secondary",children:"Total Members"}),(0,d.jsx)("span",{className:"font-medium text-foreground",children:u.length})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-text-secondary",children:"Active"}),(0,d.jsx)("span",{className:"font-medium text-success",children:u.filter(e=>"active"===e.status).length})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm text-text-secondary",children:"Tasks Completed"}),(0,d.jsx)("span",{className:"font-medium text-foreground",children:u.reduce((e,s)=>e+s.tasksCompleted,0)})]}),(0,d.jsx)(r.A,{variant:"outline",size:"sm",fullWidth:!0,iconName:"UserPlus",iconPosition:"left",onClick:()=>{console.log("Opening invite members modal..."),alert("Invite Members functionality: This would open a modal to invite team members.")},children:"Invite Members"})]})]})]}),(0,d.jsxs)("div",{className:"bg-card rounded-lg border border-border p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-foreground",children:"Project Sign-off Status"}),(0,d.jsx)(n.A,{name:"CheckCircle",size:20,className:"text-primary"})]}),(0,d.jsx)(o,{projectId:null===s||void 0===s?void 0:s.id,userRole:t,onRequestSignoff:()=>{b("request"),y(null),j(!0)},onApproveSignoff:e=>{b("approve"),y(e),j(!0)}})]}),(0,d.jsxs)("div",{className:"bg-card rounded-lg border border-border p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-foreground",children:"Project Milestones"}),(0,d.jsx)(r.A,{variant:"outline",size:"sm",iconName:"Plus",iconPosition:"left",onClick:()=>{console.log("Opening add milestone modal..."),S(!0)},children:"Add Milestone"})]}),(0,d.jsx)("div",{className:"space-y-4",children:p.map(e=>(0,d.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-lg border border-border hover:bg-muted/50 transition-colors",children:[(0,d.jsx)("div",{className:"w-3 h-3 rounded-full "+("completed"===e.status?"bg-success":"in-progress"===e.status?"bg-warning":"bg-muted")}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,d.jsx)("h4",{className:"font-medium text-foreground",children:e.title}),(0,d.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A(e.status)}`,children:e.status.replace("-"," ")})]}),(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsxs)("span",{className:"text-sm text-text-secondary",children:["Due: ",new Date(e.dueDate).toLocaleDateString()]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:"w-20 bg-muted rounded-full h-1.5",children:(0,d.jsx)("div",{className:"bg-primary h-1.5 rounded-full transition-all duration-300",style:{width:`${e.progress}%`}})}),(0,d.jsxs)("span",{className:"text-sm text-text-secondary",children:[e.progress,"%"]})]})]})]})]},e.id))})]}),(0,d.jsxs)("div",{className:"bg-card rounded-lg border border-border p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-foreground",children:"Team Members"}),(0,d.jsx)(r.A,{variant:"outline",size:"sm",iconName:"Settings",iconPosition:"left",children:"Manage Roles"})]}),(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(e=>(0,d.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-lg border border-border hover:bg-muted/50 transition-colors",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("img",{src:e.avatar,alt:e.name,className:"w-12 h-12 rounded-full object-cover"}),(0,d.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-card "+("active"===e.status?"bg-success":"bg-text-secondary")})]}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("h4",{className:"font-medium text-foreground",children:e.name}),(0,d.jsx)("p",{className:"text-sm text-text-secondary",children:e.role}),(0,d.jsxs)("div",{className:"flex items-center gap-4 mt-1",children:[(0,d.jsxs)("span",{className:"text-xs text-text-secondary",children:[e.tasksCompleted,"/",e.tasksAssigned," tasks"]}),(0,d.jsx)("div",{className:"w-16 bg-muted rounded-full h-1",children:(0,d.jsx)("div",{className:"bg-primary h-1 rounded-full transition-all duration-300",style:{width:e.tasksCompleted/e.tasksAssigned*100+"%"}})})]})]}),(0,d.jsx)(r.A,{variant:"ghost",size:"sm",iconName:"MoreHorizontal"})]},e.id))})]}),(0,d.jsx)(c.A,{isOpen:f,onClose:()=>{j(!1),y(null)},projectId:null===s||void 0===s?void 0:s.id,projectName:null===s||void 0===s?void 0:s.name,mode:v,signoffData:N,onSuccess:e=>{console.log("Sign-off operation successful:",e),j(!1),y(null)}}),(0,d.jsx)(x,{isOpen:w,onClose:()=>S(!1),onSave:async e=>{try{console.log("Saving milestone:",e),h(s=>[...s,e]),console.log("Milestone created successfully")}catch(s){throw console.error("Error saving milestone:",s),s}},projectId:null===s||void 0===s?void 0:s.id})]})}}}]);
//# sourceMappingURL=661.ae40322e.chunk.js.map