{"version":3,"file":"static/js/203.5501a0da.chunk.js","mappings":"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","sources":["utils/kanbanApiService.js"],"sourcesContent":["// Dedicated Kanban API Service\r\n// Uses the new comprehensive Kanban backend endpoints\r\n\r\nimport sessionService from './sessionService.js';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://192.168.9.119:8000';\r\n\r\nconst getAuthHeaders = (extra = {}) => {\r\n  const token = sessionService.getSessionToken?.();\r\n  return {\r\n    'Content-Type': 'application/json',\r\n    ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n    ...extra,\r\n  };\r\n};\r\n\r\nconst fetchWithCredentials = async (url, options = {}) => {\r\n  return fetch(url, {\r\n    ...options,\r\n    credentials: 'include',\r\n    headers: {\r\n      ...getAuthHeaders(),\r\n      ...options.headers,\r\n    },\r\n  });\r\n};\r\n\r\nconst handle = async (resp) => {\r\n  const text = await resp.text();\r\n  let json;\r\n  try {\r\n    json = text ? JSON.parse(text) : {};\r\n  } catch {\r\n    json = { message: text };\r\n  }\r\n  if (!resp.ok) {\r\n    // Handle validation errors (422) with detailed messages\r\n    if (resp.status === 422 && json?.detail) {\r\n      const validationErrors = Array.isArray(json.detail)\r\n        ? json.detail.map(err => `${err.loc?.join('.')}: ${err.msg}`).join(', ')\r\n        : json.detail;\r\n      throw new Error(`Validation error: ${validationErrors}`);\r\n    }\r\n\r\n    const msg = json?.error?.message || json?.message || `HTTP ${resp.status}`;\r\n    throw new Error(msg);\r\n  }\r\n  return json;\r\n};\r\n\r\nconst kanbanApiService = {\r\n  // Board operations\r\n  board: {\r\n    getOrCreateForProject: async (projectId) => {\r\n      console.log(`🔧 Getting/creating board for project: ${projectId}`);\r\n      const resp = await fetchWithCredentials(\r\n        `${API_BASE_URL}/api/v1/kanban/projects/${projectId}/board`\r\n      );\r\n      const result = await handle(resp);\r\n      console.log(`🔧 Board response:`, result);\r\n      console.log(`🔧 Board response structure - has data property:`, !!result?.data);\r\n      console.log(`🔧 Board response structure - has id:`, !!result?.id);\r\n      console.log(`🔧 Board response structure - has columns:`, !!result?.columns);\r\n      return result;\r\n    }\r\n  },\r\n\r\n  // Column operations\r\n  columns: {\r\n    create: async (boardId, columnData) => {\r\n      console.log(`🔧 Creating column in board: ${boardId}`, columnData);\r\n      const resp = await fetchWithCredentials(\r\n        `${API_BASE_URL}/api/v1/kanban/boards/${boardId}/columns`,\r\n        {\r\n          method: 'POST',\r\n          body: JSON.stringify(columnData),\r\n        }\r\n      );\r\n      const result = await handle(resp);\r\n      console.log(`🔧 Column creation response:`, result);\r\n      return result;\r\n    },\r\n\r\n    getCards: async (columnId) => {\r\n      console.log(`🔧 Getting cards for column: ${columnId}`);\r\n      const resp = await fetchWithCredentials(\r\n        `${API_BASE_URL}/api/v1/kanban/columns/${columnId}/cards`\r\n      );\r\n      const result = await handle(resp);\r\n      console.log(`🔧 Cards response:`, result);\r\n      return result;\r\n    }\r\n  },\r\n\r\n  // Card operations\r\n  cards: {\r\n    create: async (columnId, cardData) => {\r\n      console.log(`🔧 Creating card in column: ${columnId}`, cardData);\r\n      const resp = await fetchWithCredentials(\r\n        `${API_BASE_URL}/api/v1/kanban/columns/${columnId}/cards`,\r\n        {\r\n          method: 'POST',\r\n          body: JSON.stringify(cardData),\r\n        }\r\n      );\r\n      const result = await handle(resp);\r\n      console.log(`🔧 Card creation response:`, result);\r\n      return result;\r\n    },\r\n\r\n    update: async (cardId, cardData) => {\r\n      console.log(`🔧 Updating card: ${cardId}`, cardData);\r\n      const resp = await fetchWithCredentials(\r\n        `${API_BASE_URL}/api/v1/kanban/cards/${cardId}`,\r\n        {\r\n          method: 'PUT',\r\n          body: JSON.stringify(cardData),\r\n        }\r\n      );\r\n      const result = await handle(resp);\r\n      console.log(`🔧 Card update response:`, result);\r\n      return result;\r\n    },\r\n\r\n    move: async (cardId, targetColumnId, position = null) => {\r\n      console.log(`🔧 Moving card ${cardId} to column ${targetColumnId} at position ${position}`);\r\n      const resp = await fetchWithCredentials(\r\n        `${API_BASE_URL}/api/v1/kanban/cards/${cardId}/move`,\r\n        {\r\n          method: 'PUT',\r\n          body: JSON.stringify({\r\n            target_column_id: targetColumnId,\r\n            position: position\r\n          }),\r\n        }\r\n      );\r\n      const result = await handle(resp);\r\n      console.log(`🔧 Card move response:`, result);\r\n      return result;\r\n    },\r\n\r\n    delete: async (cardId) => {\r\n      console.log(`🔧 Deleting card: ${cardId}`);\r\n      const resp = await fetchWithCredentials(\r\n        `${API_BASE_URL}/api/v1/kanban/cards/${cardId}`,\r\n        {\r\n          method: 'DELETE',\r\n        }\r\n      );\r\n      const result = await handle(resp);\r\n      console.log(`🔧 Card deletion response:`, result);\r\n      return result;\r\n    }\r\n  },\r\n\r\n  // Utility methods\r\n  utils: {\r\n    // Transform backend board data to frontend format\r\n    transformBoardData: (backendBoard) => {\r\n      if (!backendBoard) {\r\n        return null;\r\n      }\r\n\r\n      // Handle both wrapped (backendBoard.data) and direct formats\r\n      const board = backendBoard.data || backendBoard;\r\n\r\n      // Ensure we have the required fields\r\n      if (!board || !board.id || !board.columns) {\r\n        console.log('❌ Invalid board data structure:', board);\r\n        return null;\r\n      }\r\n\r\n      return {\r\n        id: board.id,\r\n        name: board.name,\r\n        description: board.description,\r\n        project_id: board.project_id,\r\n        columns: board.columns.map(col => ({\r\n          id: col.id,\r\n          title: col.name,\r\n          name: col.name,\r\n          position: col.position,\r\n          order: col.position,\r\n          color: col.color,\r\n          board_id: col.board_id\r\n        })),\r\n        created_at: board.created_at,\r\n        updated_at: board.updated_at\r\n      };\r\n    },\r\n\r\n    // Transform backend card data to frontend format\r\n    transformCardData: (backendCard) => {\r\n      if (!backendCard) {\r\n        return null;\r\n      }\r\n\r\n      const card = backendCard.data || backendCard;\r\n      return {\r\n        id: card.id,\r\n        columnId: card.column_id,\r\n        title: card.title,\r\n        description: card.description,\r\n        position: card.position,\r\n        priority: card.priority,\r\n        status: card.status,\r\n        dueDate: card.due_date,\r\n        labels: card.labels || [],\r\n        assignedTo: card.assignments?.map(a => a.user_id) || [],\r\n        assignments: card.assignments || [],\r\n        createdBy: card.created_by,\r\n        createdAt: card.created_at,\r\n        updatedAt: card.updated_at,\r\n        checklist: card.checklist_items || []\r\n      };\r\n    },\r\n\r\n    // Transform frontend card data to backend format\r\n    transformCardToBackend: (frontendCard) => {\r\n      return {\r\n        title: frontendCard.title,\r\n        description: frontendCard.description || '',\r\n        priority: frontendCard.priority || 'medium',\r\n        assigned_to: frontendCard.assignedTo || [],\r\n        due_date: frontendCard.dueDate || null,\r\n        labels: frontendCard.labels || []\r\n      };\r\n    }\r\n  }\r\n};\r\n\r\nexport default kanbanApiService;\r\n"],"names":["API_BASE_URL","process","getAuthHeaders","_sessionService$getSe","extra","arguments","length","undefined","token","sessionService","getSessionToken","call","Authorization","fetchWithCredentials","async","url","options","fetch","credentials","headers","handle","text","resp","json","JSON","parse","message","ok","_json","_json2","_json2$error","_json3","status","detail","validationErrors","Array","isArray","map","err","_err$loc","loc","join","msg","Error","error","board","getOrCreateForProject","console","log","projectId","result","data","id","columns","create","boardId","columnData","method","body","stringify","getCards","columnId","cards","cardData","update","cardId","move","targetColumnId","position","target_column_id","delete","utils","transformBoardData","backendBoard","name","description","project_id","col","title","order","color","board_id","created_at","updated_at","transformCardData","backendCard","_card$assignments","card","column_id","priority","dueDate","due_date","labels","assignedTo","assignments","a","user_id","createdBy","created_by","createdAt","updatedAt","checklist","checklist_items","transformCardToBackend","frontendCard","assigned_to"],"sourceRoot":""}